<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RATHORE V51 PRO (ULTIMATE)</title>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@700&family=Rajdhani:wght@700;800;900&family=Tiro+Devanagari+Hindi&display=swap" rel="stylesheet">

    <style>
        /* --- SECURITY LOCK STYLES (UNCHANGED) --- */
        #securityScreen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000 url('https://i.pinimg.com/736x/2a/3b/93/2a3b935756776776c576576576.jpg') center/cover; z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
        .glass-panel { background: rgba(0, 0, 0, 0.9); border: 2px solid #00ff41; padding: 25px; border-radius: 15px; width: 100%; max-width: 350px; box-shadow: 0 0 30px rgba(0, 255, 65, 0.3); backdrop-filter: blur(10px); }
        .lock-icon { font-size: 50px; color: #00ff41; margin-bottom: 15px; animation: pulse 2s infinite; }
        .device-id-box { background: #222; border: 1px dashed #555; padding: 10px; margin: 15px 0; color: #fff; font-family: monospace; letter-spacing: 2px; font-size: 18px; cursor: pointer; user-select: all; word-break: break-all; }
        .inp-license { width: 100%; padding: 12px; background: #111; border: 1px solid #444; color: #00ff41; text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-radius: 5px; outline: none; text-transform: uppercase; }
        .btn-unlock { background: #00ff41; color: #000; border: none; padding: 12px; width: 100%; font-weight: 900; font-size: 16px; cursor: pointer; border-radius: 5px; font-family: 'Rajdhani'; text-transform: uppercase; }
        
        /* MAIN STYLES */
        :root { --theme-color: #00ff41; --black: #000000; --red: #ff0055; --gold: #FFD700; --purple: #bf00ff; --neon-blue: #00f3ff; --card-bg: rgba(20, 20, 20, 0.85); }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-weight: bold !important; }
        body { background: linear-gradient(rgba(0,0,0,0.92), rgba(0,0,0,0.98)), url('https://i.pinimg.com/736x/2a/3b/93/2a3b935756776776c576576576.jpg'); background-size: cover; background-position: center; background-attachment: fixed; font-family: 'Courier Prime', monospace; color: var(--theme-color); width: 100%; min-height: 100vh; overflow-x: hidden; padding-bottom: 100px; display: flex; flex-direction: column; transition: 0.5s; padding-top: 25px; }

        /* --- NEW PRO FEATURES CSS --- */
        /* 1. Ticker */
        .ticker-wrap { position: fixed; top: 0; left: 0; width: 100%; height: 25px; background: #000; overflow: hidden; white-space: nowrap; z-index: 10002; border-bottom: 1px solid #333; display: flex; align-items: center; }
        .ticker { display: inline-block; animation: marquee 20s linear infinite; padding-left: 100%; font-family: 'Rajdhani'; font-size: 11px; color: #fff; }
        .ticker-item { display: inline-block; padding: 0 20px; }
        .win-amt { color: var(--gold); }
        @keyframes marquee { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }

        /* 2. Glassmorphism Class */
        .pro-card { background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 4px 30px rgba(0,0,0,0.5); border-radius: 12px; }

        /* 3. Target Bar */
        .target-container { width: 100%; background: #111; height: 6px; border-radius: 3px; margin-top: 5px; position: relative; overflow: hidden; border: 1px solid #333; }
        .target-fill { height: 100%; background: linear-gradient(90deg, var(--theme-color), var(--neon-blue)); width: 0%; transition: width 0.5s; box-shadow: 0 0 10px var(--theme-color); }

        /* 4. Pattern Visualizer */
        .pattern-row { display: flex; gap: 5px; justify-content: center; padding: 8px; background: #000; border-radius: 20px; border: 1px solid #333; margin: 10px 0; overflow: hidden; height: 30px; align-items: center; }
        .pattern-dot { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; box-shadow: inset 0 0 3px rgba(0,0,0,0.5); }
        .dot-b { background: var(--theme-color); box-shadow: 0 0 5px var(--theme-color); }
        .dot-s { background: var(--red); box-shadow: 0 0 5px var(--red); }

        /* 5. Calculator Modal */
        #calcModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 20000; justify-content: center; align-items: center; padding: 20px; }
        .modal-content { background: #111; border: 1px solid var(--theme-color); padding: 20px; border-radius: 10px; width: 100%; max-width: 350px; text-align: center; }
        .calc-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #333; color: #fff; font-size: 13px; }
        .btn-calc { background: var(--purple); color: #fff; width: 100%; border: none; padding: 10px; border-radius: 5px; margin-top: 10px; font-family: 'Rajdhani'; cursor: pointer; font-size: 14px; box-shadow: 0 0 10px rgba(191,0,255,0.3); }

        .garland { position: fixed; top: 25px; left: 0; width: 100%; height: 60px; background-image: url('https://png.pngtree.com/png-clipart/20230913/ourmid/pngtree-marigold-flower-garland-festival-decoration-png-image_10026362.png'); background-repeat: repeat-x; background-size: contain; z-index: 100000; pointer-events: none; }
        .rgb-border { position: fixed; z-index: 9999; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; border: 4px solid transparent; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); display: none; }
        .rgb-border.active { display: block; }
        .rgb-border::before { content: ''; position: absolute; top: -4px; bottom: -4px; left: -4px; right: -4px; background: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000); z-index: -1; animation: rgbRunning 3s linear infinite; mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; padding: 4px; }
        @keyframes rgbRunning { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(360deg); } }

        /* HARD DISCO ANIMATION */
        .disco-active body { animation: discoBg 0.5s infinite alternate; }
        .hard-disco-active body { animation: hardDisco 0.15s infinite; }
        
        @keyframes hardDisco { 
            0% { background-color: #ff0000; } 
            33% { background-color: #00ff00; } 
            66% { background-color: #0000ff; } 
            100% { background-color: #000; } 
        }
        
        .disco-active .divine-header, .disco-active .pred-card { animation: discoBorder 0.3s infinite alternate; }
        .disco-active .slider { animation: blinkToggle 0.5s infinite alternate; }
        @keyframes blinkToggle { 0% { background-color: #222; box-shadow: none; } 100% { background-color: var(--theme-color); box-shadow: 0 0 15px var(--theme-color); } }
        
        @keyframes discoBg { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(90deg); } }
        @keyframes discoBorder { 0% { border-color: #ff0000; box-shadow: 0 0 20px #ff0000; } 50% { border-color: #00ff00; box-shadow: 0 0 20px #00ff00; } 100% { border-color: #0000ff; box-shadow: 0 0 20px #0000ff; } }

        /* HEADER */
        .fixed-header { width: 100%; background: #000; border-bottom: 2px solid var(--gold); padding: 10px 15px; position: fixed; top: 25px; left: 0; z-index: 10001; margin-top: 0; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3); }
        .profile-section { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .user-avatar { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--theme-color); background-color: #000; background-size: cover; background-position: center; box-shadow: 0 0 10px var(--theme-color); }
        .user-text { display: flex; flex-direction: column; text-align: left; }
        .welcome-msg { font-size: 9px; color: var(--gold); font-family: 'Rajdhani'; }
        .user-name { font-size: 14px; color: #fff; font-family: 'Rajdhani'; line-height: 1; text-shadow: 0 0 5px var(--theme-color); margin-bottom: 2px; }
        
        .user-status { font-size: 10px; color: #fff; font-family: 'Rajdhani'; display: flex; align-items: center; gap: 4px; }
        .blink-dot { width: 8px; height: 8px; background-color: #00ff00; border-radius: 50%; display: inline-block; box-shadow: 0 0 5px #00ff00; animation: blinkStatus 1s infinite; }
        @keyframes blinkStatus { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(0.8); } 100% { opacity: 1; transform: scale(1); } }
        .live-badge { background: var(--red); color: #fff; padding: 1px 4px; border-radius: 3px; font-size: 8px; animation: pulse 1s infinite; margin-right: 3px; }

        .fixed-title { font-family: 'Rajdhani'; font-size: 16px; font-weight: 900; background: linear-gradient(to right, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #bf00ff); -webkit-background-clip: text; background-clip: text; color: transparent; text-transform: uppercase; letter-spacing: 1px; text-align: right; line-height: 1.1; }

        .divine-header { margin-top: 80px; position: relative; display: flex; flex-direction: column; align-items: center; padding: 15px; border-bottom: 2px solid var(--purple); background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); }
        .krishna-container { position: relative; width: 150px; height: 150px; display: flex; justify-content: center; align-items: center; }
        .divine-aura { position: absolute; width: 100%; height: 100%; border-radius: 50%; background: radial-gradient(circle, rgba(255,215,0,0.8) 0%, rgba(191,0,255,0.4) 60%, transparent 100%); animation: auraPulse 2s infinite alternate; z-index: 1; box-shadow: 0 0 40px var(--gold); }
        @keyframes auraPulse { 0% { transform: scale(0.9); opacity: 0.8; } 100% { transform: scale(1.1); opacity: 1; } }
        .krishna-img { width: 100%; height: 100%; object-fit: cover; z-index: 2; border-radius: 50%; border: 3px solid var(--gold); background: #000; overflow: hidden; }
        .krishna-img img { width: 100%; height: 100%; object-fit: cover; }
        .hindi-text { font-family: 'Tiro Devanagari Hindi', serif; color: var(--gold); font-size: 32px; text-shadow: 0 0 10px var(--red); margin-top: 10px; z-index: 2; font-weight: bold; }
        .jhalar { position: absolute; bottom: -5px; left: 20px; font-size: 24px; color: var(--red); animation: swing 2s ease-in-out infinite; z-index: 4; }
        @keyframes swing { 0% { transform: rotate(5deg); } 50% { transform: rotate(-5deg); } 100% { transform: rotate(5deg); } }

        /* CONTINUOUS FLOWER RAIN */
        .flower-rain-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 3000; overflow: hidden; display: none; }
        .flower { position: absolute; top: -50px; font-size: 20px; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        .container { width: 100%; padding: 10px; position: relative; z-index: 2; display: block; flex: 1; }

        .stats-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .stat-box { flex: 1; background: linear-gradient(180deg, #111, #000); border: 1px solid #333; border-radius: 10px; padding: 10px; text-align: center; }
        .stat-box.profit { border-color: var(--gold); box-shadow: 0 0 15px rgba(255,215,0,0.2); width: 100%; }
        .stat-val { font-family: 'Rajdhani'; font-size: 20px; color: #fff; display: block;}
        .stat-label { font-size: 10px; color: #aaa; }

        /* TREND GRAPH */
        .trend-row { display: flex; gap: 12px; margin-bottom: 15px; height: 70px; }
        .trend-box { flex: 1; background: rgba(0,0,0,0.8); border: 1px solid #333; border-radius: 10px; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; }
        .win-graph-box { border: 1px solid var(--theme-color); }
        .loss-graph-box { border: 1px solid var(--red); }
        .trend-label { position: absolute; top: 3px; left: 5px; font-size: 10px; font-family: 'Rajdhani'; z-index: 2; background:rgba(0,0,0,0.5); padding:2px; border-radius:3px; }
        .svg-line { width: 100%; height: 100%; }
        .path-win { fill: none; stroke: var(--theme-color); stroke-width: 2; filter: drop-shadow(0 0 5px var(--theme-color)); }
        .path-loss { fill: none; stroke: var(--red); stroke-width: 2; filter: drop-shadow(0 0 5px var(--red)); }

        /* FIXED SLIDER IMAGES */
        .slider-container { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 15px; padding: 10px 0; margin-bottom: 15px; width: 100%; }
        .slide-card { min-width: 130px; height: 90px; scroll-snap-align: center; border-radius: 12px; border: 1px solid #333; position: relative; overflow: hidden; background: #111; flex-shrink: 0; box-shadow: 0 5px 15px rgba(0,0,0,0.5); transition: transform 0.2s; cursor: pointer; }
        .slide-card:active { transform: scale(0.95); border-color: var(--gold); }
        .slide-img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; }
        .slide-overlay { position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.85); color: #fff; padding: 4px; font-family: 'Rajdhani'; font-size: 11px; font-weight: bold; text-align: center; border-top: 1px solid var(--theme-color); }

        .main-info-area { display: flex; gap: 10px; height: 180px; margin-bottom: 15px; }
        .big-image-box { flex: 1; border: 1px solid var(--purple); border-radius: 10px; overflow: hidden; background: #000; position: relative; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 10px rgba(191, 0, 255, 0.3); }
        .big-image-box img { width: 100%; height: 100%; object-fit: contain; }
        .scanning-line { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: var(--purple); box-shadow: 0 0 10px var(--purple); animation: scan 2s linear infinite; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        
        .meters-col { flex: 1.2; display: flex; flex-direction: column; justify-content: space-between; padding: 5px; background: rgba(0,0,0,0.5); border-radius: 10px; border: 1px solid #333; }
        .meter-box { text-align: center; position: relative; width: 100%; display:flex; align-items:center; gap: 10px; height: 33%; border-bottom: 1px dashed #333; }
        .meter-box:last-child { border-bottom: none; }
        .meter-svg { width: 50px; height: 50px; transform: rotate(-90deg); }
        .meter-circle-bg { fill: none; stroke: #222; stroke-width: 5; }
        .meter-circle-val { fill: none; stroke: var(--theme-color); stroke-width: 5; stroke-dasharray: 126; stroke-dashoffset: 126; transition: 1s ease; }
        .meter-text { position: absolute; left: 16px; top: 18px; font-size: 10px; font-family: 'Rajdhani'; color: #fff; }
        .meter-details { text-align: left; }
        .meter-label { font-size: 10px; color:#aaa; font-weight: bold; }
        .meter-sub { font-size: 14px; color: #fff; font-family: 'Rajdhani'; }

        /* FIXED BALLS GRID */
        .balls-grid-container { background: #000; padding: 15px; border-radius: 15px; border: 1px solid #333; margin-bottom: 15px; position: relative; overflow: hidden; }
        .balls-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 15px; }
        .ball-item { aspect-ratio: 1; border-radius: 50%; border: 2px solid #444; display: flex; justify-content: center; align-items: center; font-family: 'Rajdhani'; font-size: 18px; color: #666; position: relative; z-index: 2; transition: 0.3s; background: #111; }
        .ball-item.active { border-color: #fff; color: #fff; text-shadow: 0 0 5px #fff; transform: scale(1.1); }
        .ball-bg-glow { position: absolute; width: 100%; height: 100%; top: 0; left: 0; border-radius: 50%; z-index: 1; opacity: 0; transition: 0.3s; }
        .ball-item.cold-active { border-color: var(--neon-blue); color: var(--neon-blue); box-shadow: 0 0 10px var(--neon-blue); }

        .number-graph-box { height: 100px; background: rgba(0,0,0,0.6); border: 1px solid #333; border-radius: 10px; margin-bottom: 15px; position: relative; display: flex; align-items: flex-end; justify-content: space-around; padding: 5px; overflow: hidden; }
        .num-bar-col { display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; width: 8%; }
        .num-bar { width: 100%; background: linear-gradient(to top, #222, var(--purple)); border-radius: 3px 3px 0 0; position: relative; transition: height 0.5s; min-height: 5%; border-top: 2px solid #fff; }
        .num-bar.hot { background: linear-gradient(to top, #006400, var(--theme-color)); box-shadow: 0 0 15px var(--theme-color); }
        .num-bar-label { font-size: 10px; color: #aaa; margin-top: 2px; }
        .num-bar-val { font-size: 9px; color: #fff; margin-bottom: 2px; font-weight: bold; }

        /* DJ PANEL / GAME AREA */
        .dj-panel { margin-top: 20px; border: 1px solid #333; border-radius: 10px; padding: 15px; background: #000; position: relative; overflow: hidden; text-align: center; }
        .dj-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .dj-title { color: var(--purple); font-family: 'Rajdhani'; font-weight: 900; font-size: 16px; letter-spacing: 2px; }
        
        canvas { width: 100%; height: 400px; background: #111; border: 1px solid #333; display: block; margin: 0 auto; border-radius: 5px; box-shadow: inset 0 0 20px rgba(0,0,0,0.8); }
        .game-ui { display: flex; justify-content: space-between; padding: 0 10px; color: #fff; font-size: 12px; margin-bottom: 5px; }
        .owner-text { font-family: 'Rajdhani'; font-weight: 900; font-size: 24px; color: #fff; margin-top: 15px; text-shadow: 0 0 10px var(--red); animation: textPulse 0.5s infinite alternate; }
        @keyframes textPulse { from { transform: scale(1); opacity: 0.8; } to { transform: scale(1.1); opacity: 1; text-shadow: 0 0 20px var(--theme-color); } }

        /* PREDICTION */
        .pred-card { border: 1px solid var(--theme-color); padding: 20px; text-align: center; border-radius: 15px; margin: 15px 0; background: var(--card-bg); position: relative; box-shadow: inset 0 0 20px rgba(0,255,65,0.1); width: 100%; backdrop-filter: blur(5px); z-index: 10; }
        .timer-badge { font-size: 40px; font-weight: 900; color: var(--theme-color); text-shadow: 0 0 10px var(--theme-color); font-family: 'Rajdhani'; letter-spacing: 2px; }
        .result-display { font-size: 48px; font-weight: 900; margin: 10px 0; font-family: 'Rajdhani'; letter-spacing: 2px; }
        .big { color: var(--theme-color); text-shadow: 0 0 15px var(--theme-color); }
        .small { color: var(--red); text-shadow: 0 0 15px var(--red); }
        .skip { color: var(--gold); font-size: 30px; animation: pulse 1s infinite; border: 2px dashed var(--gold); padding: 5px; border-radius: 10px; }
        .ai-glow { animation: neonPulse 0.8s infinite alternate; }
        @keyframes neonPulse { from { box-shadow: 0 0 5px var(--theme-color); transform: scale(1); } to { box-shadow: 0 0 25px var(--theme-color), 0 0 5px #fff; transform: scale(1.05); } }

        /* GAME FRAME */
        .game-frame-container { width: 100%; height: 85vh; display: flex; flex-direction: column; position: relative; }
        iframe { width: 100%; height: 100%; border: none; background: #fff; flex: 1; border-radius: 10px; }
        .ai-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; display: none; }
        .ai-overlay.active-win { animation: flashGreen 1s infinite; box-shadow: inset 0 0 80px #00ff41; background: rgba(0, 255, 65, 0.15); border: 2px solid #00ff41; }
        .ai-overlay.active-loss { animation: flashRed 1s infinite; box-shadow: inset 0 0 80px #ff0055; background: rgba(255, 0, 85, 0.15); border: 2px solid #ff0055; }
        @keyframes flashGreen { 0% { opacity: 0.3; } 50% { opacity: 0.9; } 100% { opacity: 0.3; } }
        @keyframes flashRed { 0% { opacity: 0.3; } 50% { opacity: 0.9; } 100% { opacity: 0.3; } }

        /* CONTROLS */
        .btn-hacker { background: rgba(0, 0, 0, 0.3); border: 1px solid var(--theme-color); color: var(--theme-color); padding: 12px; cursor: pointer; font-family: 'Rajdhani'; font-weight: 800; width: 100%; font-size: 16px; border-radius: 5px; margin-bottom: 10px; }
        .btn-stop { border-color: var(--red); color: var(--red); background: rgba(255, 0, 85, 0.1); }
        .server-box { border: 1px solid #333; padding: 10px; border-radius: 10px; margin: 10px 0; background: rgba(0,0,0,0.7); width: 100%; position: relative; z-index: 20; }
        .srv-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; margin-bottom: 5px; }
        .sub-srv-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; margin-bottom: 10px; }
        .timer-grid { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px; margin: 10px 0; }
        .srv-btn { background: #111; border: 1px solid #333; color: #555; padding: 10px; font-size: 11px; cursor: pointer; font-weight: bold; border-radius: 5px; text-align: center; font-family: 'Rajdhani'; transition: 0.3s; z-index: 30; }
        .srv-btn.active { background: var(--purple); color: #fff; box-shadow: 0 0 10px var(--purple); animation: pulseBtn 1s infinite; }
        .timer-btn { background: #111; border: 1px solid #333; color: #555; padding: 10px; font-size: 11px; cursor: pointer; font-weight: bold; border-radius: 5px; text-align: center; font-family: 'Rajdhani'; transition: 0.3s; z-index: 30; }
        .timer-btn.active { background: var(--theme-color); color: #000; box-shadow: 0 0 10px var(--theme-color); }
        @keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        .sub-btn { background: #000; border: 1px solid #333; color: #666; padding: 8px; font-size: 10px; cursor: pointer; }
        .sub-btn.active { border-color: var(--theme-color); color: var(--theme-color); }
        .srv-status { text-align: center; color: var(--theme-color); font-size: 10px; margin-top: 5px; display: none; }

        .cfg-panel { border: 1px solid #333; padding: 15px; border-radius: 10px; margin-bottom: 20px; background: rgba(0,0,0,0.8); width: 100%; }
        .switch-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-size: 13px; border-bottom: 1px solid #111; padding-bottom: 8px; }
        .switch { position: relative; display: inline-block; width: 40px; height: 22px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #222; transition: .4s; border-radius: 34px; border: 1px solid #444; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: #888; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: rgba(255,255,255,0.2); border-color: var(--theme-color); }
        input:checked + .slider:before { transform: translateX(18px); background-color: var(--theme-color); }
        .inp-mini { width: 100%; background: #000; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 5px; font-size: 12px; margin-bottom: 10px; display: none; font-family: 'Courier Prime'; }
        
        .inp-key { width: 100%; padding: 12px; margin: 15px 0; background: #111; border: 1px solid #333; color: var(--theme-color); text-align: center; font-family: 'Courier Prime'; font-weight: bold; font-size: 16px; outline: none; border-radius: 5px; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: #000; border-top: 1px solid #333; display: flex; justify-content: space-around; padding: 12px 0; z-index: 1000; }
        .nav-item { color: #444; text-align: center; cursor: pointer; transition: 0.3s; flex: 1; }
        .nav-item.active { color: var(--theme-color); text-shadow: 0 0 10px var(--theme-color); transform: translateY(-3px); }
        .tab-content { display: none; width: 100%; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* SCREENS & POPUPS */
        #resultPopup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 20000; justify-content: center; align-items: center; flex-direction: column; animation: zoomIn 0.3s ease; }
        .popup-box { background: #000; border: 2px solid #fff; padding: 30px; border-radius: 20px; text-align: center; box-shadow: 0 0 50px rgba(0,255,65,0.5); transform: scale(1.2); }
        .popup-title { font-family: 'Rajdhani'; font-size: 60px; font-weight: 900; margin-bottom: 10px; }
        .popup-num { font-size: 40px; color: #fff; font-weight: bold; }
        .win-mode .popup-box { border-color: var(--theme-color); box-shadow: 0 0 50px var(--theme-color); }
        .win-mode .popup-title { color: var(--theme-color); text-shadow: 0 0 20px var(--theme-color); }
        .loss-mode .popup-box { border-color: var(--red); box-shadow: 0 0 50px var(--red); }
        .loss-mode .popup-title { color: var(--red); text-shadow: 0 0 20px var(--red); }
        @keyframes zoomIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* PROFILE CARD */
        .profile-card { display: flex; align-items: center; gap: 15px; padding: 15px; background: linear-gradient(90deg, rgba(0,0,0,0.8), rgba(20,20,20,0.8)); border: 1px solid var(--theme-color); border-radius: 10px; margin-bottom: 20px; }
        .profile-avatar { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--gold); background-color: #000; background-size: cover; background-position: center; }
        .profile-info h3 { color: #fff; font-family: 'Rajdhani'; font-size: 20px; margin-bottom: 2px; }
        .profile-badge { background: var(--gold); color: #000; padding: 2px 8px; border-radius: 3px; font-size: 10px; font-weight: bold; font-family: 'Rajdhani'; }

        #toast { visibility: hidden; min-width: 250px; background-color: #000; color: var(--theme-color); text-align: center; border: 1px solid var(--theme-color); padding: 16px; position: fixed; z-index: 10005; left: 50%; bottom: 100px; transform: translateX(-50%); font-size: 12px; border-radius: 5px; font-weight: bold; }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 4.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 100px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 100px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        
        /* UPDATED COLOR PICKER (4x2 GRID) */
        .color-picker { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 10px; justify-items: center; margin-bottom: 10px; }
        .color-dot { width: 45px; height: 45px; border-radius: 50%; cursor: pointer; border: 2px solid #333; transition: transform 0.2s; }
        .color-dot:hover { transform: scale(1.1); border-color: #fff; }
        
        .banner-slider { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 15px; padding: 10px 0; margin-bottom: 20px; }
        .banner-card { min-width: 90%; height: 160px; background: #111; border-radius: 12px; border: 1px solid var(--purple); scroll-snap-align: center; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .banner-bg { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; position: absolute; }
        .banner-txt { position: relative; z-index: 2; color: #fff; text-shadow: 0 2px 4px #000; font-family: 'Rajdhani'; text-align: center; }
        
        /* FEED BOX STYLES */
        #feedBoxUi { display: none; margin-top: 10px; }
        .stars { display: flex; justify-content: center; gap: 10px; margin-bottom: 10px; }
        .star { font-size: 25px; color: #333; cursor: pointer; transition: 0.2s; }
        .star.selected { color: var(--gold); }
        .inp-feed { width: 100%; background: #111; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 5px; font-family: 'Courier Prime'; height: 60px; resize: none; }

        /* VIP PLAN STYLES */
        .plan-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .plan-card { background: rgba(20, 20, 20, 0.8); border: 1px solid var(--theme-color); border-radius: 10px; padding: 15px; display: flex; align-items: center; gap: 15px; position: relative; overflow: hidden; box-shadow: 0 0 10px rgba(0,255,65,0.1); transition: 0.3s; }
        .plan-img { width: 80px; height: 80px; border-radius: 8px; object-fit: cover; border: 1px solid #444; }
        .plan-info { flex: 1; }
        .plan-title { font-size: 18px; color: #fff; font-family: 'Rajdhani'; font-weight: 900; }
        .plan-price { font-size: 14px; color: var(--gold); margin-top: 5px; }
        .plan-btn { background: var(--theme-color); color: #000; border: none; padding: 8px 15px; border-radius: 5px; font-size: 12px; cursor: pointer; font-family: 'Rajdhani'; font-weight: bold; }

        /* HIDE APP INITIALLY */
        #mainApp { display: none; }
    </style>
</head>
<body id="bodyEl">

    <div class="ticker-wrap">
        <div class="ticker" id="winnerTicker">
            </div>
    </div>

    <div id="securityScreen">
        <div class="glass-panel">
            <i class="fas fa-fingerprint lock-icon"></i>
            <h2 style="color:#fff; margin-bottom:5px;">SYSTEM LOCKED</h2>
            <p style="color:#aaa; font-size:12px;">RATHORE PREMIUM V51</p>
            
            <div style="margin-top:20px; font-size:10px; color:var(--theme-color);">YOUR DEVICE ID (CLICK TO COPY)</div>
            <div class="device-id-box" id="deviceIdDisplay" onclick="copyDeviceId()">LOADING...</div>
            
            <input type="text" id="inputKey" class="inp-license" placeholder="PASTE LICENSE KEY HERE">
            <button class="btn-unlock" onclick="validateLicense()">UNLOCK NOW</button>
            
            <div style="margin-top:15px;">
                <button onclick="window.open('https://t.me/CVZUS')" style="background:none; border:none; color:#0088cc; font-size:12px; cursor:pointer;">
                    <i class="fab fa-telegram"></i> GET KEY FROM ADMIN
                </button>
            </div>
        </div>
    </div>

    <div id="mainApp">

        <div class="garland"></div>
        <div class="rgb-border" id="rgbBorder"></div>
        <div class="flower-rain-container" id="flowerContainer"></div>

        <div class="fixed-header">
            <div class="profile-section" onclick="switchTab('tabSettings', document.querySelectorAll('.nav-item')[4])">
                <div class="user-avatar" id="headerAvatar" style="background-image: url('https://cdn-icons-png.flaticon.com/512/149/149071.png');"></div>
                <div class="user-text">
                    <span class="user-name" id="headerName">DAKSH RATHORE</span>
                    <span class="user-status">üáÆüá≥ INDIA ‚Ä¢ <span class="live-badge">LIVE</span> <span id="onlineUsers">1240</span> Online</span>
                </div>
            </div>
            <div class="fixed-title">RATHORE<br>PREMIUM V51</div>
        </div>

        <div id="resultPopup">
            <div class="popup-box">
                <div class="popup-title" id="popTitle">WIN</div>
                <div class="popup-num" id="popNum">0</div>
            </div>
        </div>

        <div id="calcModal" onclick="if(event.target==this)this.style.display='none'">
            <div class="modal-content">
                <h3 style="color:var(--purple); margin-bottom:15px; font-family:'Rajdhani';">üí∞ MONEY MANAGEMENT</h3>
                <input type="number" id="baseBet" placeholder="Base Bet (e.g. 10)" style="width:100%; padding:10px; margin-bottom:10px; background:#222; border:1px solid #444; color:#fff; text-align:center;">
                <button class="btn-hacker" onclick="calcMartingale()" style="padding:5px;">CALCULATE LEVELS</button>
                <div id="calcResults" style="margin-top:10px;"></div>
                <button class="btn-stop btn-hacker" style="margin-top:15px;" onclick="document.getElementById('calcModal').style.display='none'">CLOSE</button>
            </div>
        </div>

        <div class="container">
            
            <div class="divine-header">
                <div class="krishna-container">
                    <div class="divine-aura"></div>
                    <div class="krishna-img">
                        <img src="https://i.ibb.co/LDtsvwHt/photo-6314602691614674283-x.jpg" onerror="this.src='https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXN6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l1J9FwSQMezfQrQR2/giphy.gif'">
                    </div>
                </div>
                <div class="hindi-text">RADHE RADHE</div>
                <div style="color:var(--gold); font-size:10px; margin-top:5px;">RATHORE PREMIUM V51 ACTIVE</div>
                <div class="jhalar">üéã</div>
            </div>

            <div class="stats-row">
                <div class="stat-box profit" id="profitBox">
                    <div class="stat-val" style="color:var(--gold);" id="displayProfit">‚Çπ0</div>
                    <div class="stat-label">SESSION PROFIT</div>
                    <div class="target-container">
                        <div class="target-fill" id="targetBar"></div>
                    </div>
                    <div style="font-size:9px; color:#555; text-align:right; margin-top:2px;">DAILY TARGET: ‚Çπ5000</div>
                </div>
            </div>

            <div id="tabHome" class="tab-content active">
                
                <div class="trend-row">
                    <div class="trend-box win-graph-box"><span class="trend-label" style="color:var(--theme-color);">WIN TREND</span><div class="trend-line"><svg class="svg-line" viewBox="0 0 100 60" preserveAspectRatio="none"><path d="M0,55 Q20,50 40,20 T80,15 T100,30" class="path-win"/></svg></div></div>
                    <div class="trend-box loss-graph-box"><span class="trend-label" style="color:var(--red);">LOSS TREND</span><div class="trend-line"><svg class="svg-line" viewBox="0 0 100 60" preserveAspectRatio="none"><path d="M0,15 Q20,20 40,50 T80,55 T100,20" class="path-loss"/></svg></div></div>
                </div>

                <div class="main-info-area">
                    <div class="big-image-box">
                        <div class="scanning-line"></div>
                        <img src="https://i.ibb.co/9HRqYqpg/photo-6311876740296412591-y.jpg" onerror="this.src='https://via.placeholder.com/200x140?text=SCANNING'">
                    </div>
                    <div class="meters-col">
                        <div class="meter-box">
                            <svg class="meter-svg" viewBox="0 0 60 60"><circle class="meter-circle-bg" cx="30" cy="30" r="28"></circle><circle id="meterStab" class="meter-circle-val" cx="30" cy="30" r="28"></circle></svg>
                            <div class="meter-text" id="txtStab">0%</div>
                            <div class="meter-details"><div class="meter-label">STABLE</div><div class="meter-sub">HIGH</div></div>
                        </div>
                        <div class="meter-box">
                            <svg class="meter-svg" viewBox="0 0 60 60"><circle class="meter-circle-bg" cx="30" cy="30" r="28"></circle><circle id="meterTrend" class="meter-circle-val" cx="30" cy="30" r="28" style="stroke: var(--neon-blue);"></circle></svg>
                            <div class="meter-text" id="txtTrend">0%</div>
                            <div class="meter-details"><div class="meter-label">TREND</div><div class="meter-sub">TITANIUM</div></div>
                        </div>
                        <div class="meter-box">
                            <svg class="meter-svg" viewBox="0 0 60 60"><circle class="meter-circle-bg" cx="30" cy="30" r="28"></circle><circle id="meterPower" class="meter-circle-val" cx="30" cy="30" r="28" style="stroke: var(--gold);"></circle></svg>
                            <div class="meter-text" id="txtPower">0%</div>
                            <div class="meter-details"><div class="meter-label">POWER</div><div class="meter-sub">MAX</div></div>
                        </div>
                    </div>
                </div>

                <div class="pattern-row" id="patternVis">
                    <div style="color:#666; font-size:10px;">WAITING FOR HISTORY...</div>
                </div>

                <div style="font-size:10px; color:#aaa; text-align:center; margin-bottom:5px;">SELECT GAME TO ACTIVATE</div>
                <div class="slider-container" id="gameSlider"></div>

                <div style="color:#fff; font-size:12px; margin:10px 0 5px 5px; border-left:3px solid var(--theme-color); padding-left:10px;">
                    AI LIVE ANALYSIS (TITANIUM LOGIC)
                </div>
                <div class="number-graph-box" id="numGraphBox">
                    <div style="color:#666; width:100%; text-align:center; margin-top:50px;">WAITING FOR GAME...</div>
                </div>

                <div class="pred-card pro-card" id="predCardUi">
                    <div style="font-size:12px; color:#ccc; margin-bottom:10px;">PERIOD: <span id="periodNum" style="color:#fff;">Wait...</span></div>
                    <div class="timer-badge" id="timer">00:00</div>
                    <div id="resultText" class="result-display wait">READY</div>
                    <div id="targetDisplay" style="color:var(--gold); font-size:12px; font-weight:bold; margin-top:5px;">TITANIUM V51 ENGINE</div>
                    <div id="coldNumDisplay" style="font-size:11px; color:var(--neon-blue); margin-top:5px; display:none;">COLD NUM: --</div>
                    <div id="serverStatusDisplay" style="font-size:10px; color:#555; margin-top:5px;">SERVER: OFFLINE</div>
                </div>

                <div class="server-box pro-card">
                    <div class="srv-grid">
                        <div class="srv-btn active" onclick="selMain(1, this)">TITANIUM</div>
                        <div class="srv-btn" onclick="selMain(2, this)">MATRIX</div>
                        <div class="srv-btn" onclick="selMain(3, this)">JAVA</div>
                    </div>
                    <div class="sub-srv-grid">
                        <div class="sub-btn active" onclick="selSub('A', this)">NODE A</div>
                        <div class="sub-btn" onclick="selSub('B', this)">NODE B</div>
                        <div class="sub-btn" onclick="selSub('C', this)">NODE C</div>
                    </div>
                    <div id="srvConnectMsg" class="srv-status">CONNECTING...</div>
                    <div class="timer-grid">
                        <div class="timer-btn active" onclick="setTimer(30, this)">30s</div>
                        <div class="timer-btn" onclick="setTimer(60, this)">1m</div>
                        <div class="timer-btn" onclick="setTimer(180, this)">3m</div>
                        <div class="timer-btn" onclick="setTimer(300, this)">5m</div>
                    </div>
                </div>

                <button id="sessionBtn" class="btn-hacker" onclick="toggleSession()"><i class="fas fa-rocket"></i> START SESSION</button>
                <button class="btn-calc" onclick="document.getElementById('calcModal').style.display='flex'"><i class="fas fa-calculator"></i> MONEY MANAGEMENT TOOL</button>
                
                <div class="balls-grid-container" id="ballsGrid">
                    <div class="balls-row" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;">
                        <div class="ball-item" id="ball-0"><div class="ball-bg-glow"></div>0</div>
                        <div class="ball-item" id="ball-1"><div class="ball-bg-glow"></div>1</div>
                        <div class="ball-item" id="ball-2"><div class="ball-bg-glow"></div>2</div>
                        <div class="ball-item" id="ball-3"><div class="ball-bg-glow"></div>3</div>
                        <div class="ball-item" id="ball-4"><div class="ball-bg-glow"></div>4</div>
                        <div class="ball-item" id="ball-5"><div class="ball-bg-glow"></div>5</div>
                        <div class="ball-item" id="ball-6"><div class="ball-bg-glow"></div>6</div>
                        <div class="ball-item" id="ball-7"><div class="ball-bg-glow"></div>7</div>
                        <div class="ball-item" id="ball-8"><div class="ball-bg-glow"></div>8</div>
                        <div class="ball-item" id="ball-9"><div class="ball-bg-glow"></div>9</div>
                    </div>
                </div>

                <div class="dj-panel">
                    <div class="dj-header">
                        <span class="dj-title">SPARROW GAME</span>
                        <div class="game-ui" style="display:flex; gap:10px; color:#fff; font-size:12px;">
                            <span>SCORE: <b id="gScore">0</b></span>
                            <span>BEST: <b id="gBest">0</b></span>
                        </div>
                    </div>
                    <canvas id="gameCanvas" width="300" height="500"></canvas>
                    <button class="btn-hacker" style="margin-top:5px; padding:5px;" onclick="startGame()">PLAY GAME</button>
                    <div class="owner-text">OWNER: DAKSH RATHORE</div>
                </div>
            </div>

            <div id="tabGame" class="tab-content">
                <div class="game-frame-container">
                    <div style="text-align:center; color:var(--gold); font-size:10px; margin-bottom:5px;">AI HIGHLIGHTER ACTIVE</div>
                    <div id="aiOverlay" class="ai-overlay"></div>
                    <iframe id="gameFrame" src="about:blank"></iframe>
                </div>
            </div>

            <div id="tabVip" class="tab-content">
                <h3 style="text-align:center; color:#fff; font-family:'Rajdhani'; margin-bottom:15px;">VIP SUBSCRIPTION</h3>
                <div class="banner-slider"><div class="banner-card"><img src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnJ2eGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aGZ6aSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26tn33aiTi1jkl6H6/giphy.gif" class="banner-bg"><div class="banner-txt"><h2>UNLIMITED ACCESS</h2><p>LIFETIME FREE</p></div></div></div>
                <div class="plan-grid">
                    <div style="text-align:center; color:var(--theme-color); font-family:'Rajdhani'; font-size:20px; padding:20px; border:1px dashed var(--theme-color); border-radius:10px;">
                        YOU ARE A PREMIUM MEMBER<br>NO COINS NEEDED
                    </div>
                </div>
            </div>

            <div id="tabHistory" class="tab-content">
                <h3 style="text-align:center; color:#fff; font-family:'Rajdhani';">BOT PREDICTION LOGS</h3>
                <table style="width:100%; border-collapse:collapse; margin-top:10px; text-align:center; font-size:13px;">
                    <thead><tr><th style="border-bottom:1px solid var(--theme-color);">PERIOD</th><th style="border-bottom:1px solid var(--theme-color);">PRED</th><th style="border-bottom:1px solid var(--theme-color);">RESULT</th><th style="border-bottom:1px solid var(--theme-color);">STATUS</th></tr></thead>
                    <tbody id="historyTable"></tbody>
                </table>
            </div>

            <div id="tabSettings" class="tab-content">
                <h3 style="text-align:center; color:#fff; font-family:'Rajdhani'; margin-bottom:15px;">SYSTEM CONFIG</h3>
                
                <div class="profile-card pro-card">
                    <div class="profile-avatar" id="settingsAvatar"></div>
                    <div class="profile-info">
                        <h3 id="profileName">USER</h3>
                        <span class="profile-badge">TITANIUM USER</span>
                    </div>
                </div>

                <div class="cfg-panel pro-card">
                    <h4 style="color:var(--gold); margin-bottom:5px;">EDIT PROFILE</h4>
                    <input type="text" id="inputNewName" class="inp-key" style="margin:5px 0; font-size:12px;" placeholder="ENTER NEW NAME">
                    <div style="display:flex; gap:5px; flex-direction: column;">
                        <label class="btn-hacker" style="font-size:12px; padding:8px; margin:0; text-align:center;">
                            UPLOAD PIC <input type="file" id="uploadPicInput" hidden accept="image/*" onchange="processImage(this)">
                        </label>
                        <button class="btn-hacker" style="font-size:12px; padding:8px; margin:0; background:var(--theme-color); color:#000;" onclick="manualUpdateProfile()">UPDATE PROFILE NOW</button>
                        <button class="btn-hacker" style="font-size:10px; padding:8px; margin:0; background:var(--red);" onclick="removePhoto()">REMOVE PIC</button>
                    </div>
                </div>
                
                <div class="cfg-panel pro-card">
                    <h4 style="color:var(--theme-color); margin-bottom:10px;">8 COLOR THEME</h4>
                    <div class="color-picker">
                        <div class="color-dot" style="background:#00ff41;" onclick="setTheme('#00ff41')"></div>
                        <div class="color-dot" style="background:#ff0055;" onclick="setTheme('#ff0055')"></div>
                        <div class="color-dot" style="background:#00f3ff;" onclick="setTheme('#00f3ff')"></div>
                        <div class="color-dot" style="background:#FFD700;" onclick="setTheme('#FFD700')"></div>
                        <div class="color-dot" style="background:#bf00ff;" onclick="setTheme('#bf00ff')"></div>
                        <div class="color-dot" style="background:#ff7f00;" onclick="setTheme('#ff7f00')"></div>
                        <div class="color-dot" style="background:#ffffff;" onclick="setTheme('#ffffff')"></div>
                        <div class="color-dot" style="background:#1e90ff;" onclick="setTheme('#1e90ff')"></div>
                    </div>
                </div>

                <div class="cfg-panel pro-card">
                    <div class="switch-row"><span style="color:var(--gold);">FEED BOX (RATING)</span><label class="switch"><input type="checkbox" id="feedSwitch" onchange="tog('feedBoxUi')"><span class="slider"></span></label></div>
                    <div id="feedBoxUi">
                        <div class="stars" id="starContainer">
                            <span class="star" onclick="rate(1)">‚òÖ</span><span class="star" onclick="rate(2)">‚òÖ</span><span class="star" onclick="rate(3)">‚òÖ</span><span class="star" onclick="rate(4)">‚òÖ</span><span class="star" onclick="rate(5)">‚òÖ</span>
                        </div>
                        <textarea id="feedMsg" class="inp-feed" placeholder="Write comment..."></textarea>
                        <button class="btn-hacker" style="margin-top:5px; background: #0088cc; color:#fff;" onclick="sendFeedback()"><i class="fab fa-telegram"></i> SEND TO ADMIN</button>
                    </div>
                    <hr style="border-color:#222; margin:15px 0;">

                    <div class="switch-row"><span style="color:#FF00FF; font-weight:900;">üå∏ FLOWER RAIN LOOP</span><label class="switch"><input type="checkbox" id="flowerSwitch" onchange="toggleFlowers()"><span class="slider"></span></label></div>
                    <div class="switch-row"><span style="color:#ff0000; font-weight:900;">‚ö° HARD DISCO MODE</span><label class="switch"><input type="checkbox" id="hardDiscoSwitch" onchange="toggleHardDisco()"><span class="slider"></span></label></div>
                    <div class="switch-row"><span style="color:var(--gold); font-weight:900;">üõ°Ô∏è SAFE MODE (AUTO SKIP)</span><label class="switch"><input type="checkbox" id="safeModeSwitch"><span class="slider"></span></label></div>

                    <div class="switch-row"><span style="color:var(--red); font-weight:900;">REVERSE TELEGRAM</span><label class="switch"><input type="checkbox" id="reverseSwitch"><span class="slider"></span></label></div>
                    <div class="switch-row"><span style="color:var(--neon-blue);">AI HIGHLIGHTER</span><label class="switch"><input type="checkbox" id="aiGlowSwitch"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>DJ PARTY LIGHTS</span><label class="switch"><input type="checkbox" id="djSwitch" onchange="togDJ()"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>RGB BORDER LIGHT</span><label class="switch"><input type="checkbox" id="rgbSwitch" onchange="togRGB()"><span class="slider"></span></label></div>
                    <div class="switch-row"><span style="color:var(--gold);">SHOW SESSION PROFIT</span><label class="switch"><input type="checkbox" id="profitSwitch" onchange="togProfit()"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>USE COLD NUMBERS</span><label class="switch"><input type="checkbox" id="coldSwitch"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>PLAY SOUND ALERT</span><label class="switch"><input type="checkbox" id="soundSwitch" checked><span class="slider"></span></label></div>
                    <div class="switch-row"><span>COLOR PREDICTION MODE</span><label class="switch"><input type="checkbox" id="colorSwitch"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>PREDICTION LIMIT</span><label class="switch"><input type="checkbox" id="limitSwitch" onchange="tog('inpLimit')"><span class="slider"></span></label></div><input type="number" id="inpLimit" class="inp-mini" placeholder="Stop after N predictions">
                    <hr style="border-color:#222; margin:15px 0;">
                    <div class="switch-row"><span>TELEGRAM BOT</span><label class="switch"><input type="checkbox" id="tgSwitch"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>SEND SEASON ALERT</span><label class="switch"><input type="checkbox" id="seasonSwitch"><span class="slider"></span></label></div>
                    <div class="switch-row"><span>INCLUDE TAGS</span><label class="switch"><input type="checkbox" id="tagSwitch" onchange="tog('inpTags')"><span class="slider"></span></label></div><input type="text" id="inpTags" class="inp-mini" placeholder="Enter Tags">
                    <div class="switch-row"><span>INCLUDE GIFT CODE</span><label class="switch"><input type="checkbox" id="giftSwitch" onchange="tog('inpGift')"><span class="slider"></span></label></div><input type="text" id="inpGift" class="inp-mini" placeholder="Enter Gift Code">
                    <div class="switch-row"><span>INCLUDE INVITE LINK</span><label class="switch"><input type="checkbox" id="invSwitch" onchange="tog('inpInvite')"><span class="slider"></span></label></div><input type="text" id="inpInvite" class="inp-mini" placeholder="Enter Invite Link">
                    <div class="switch-row"><span>SHARE CHANNEL BTN</span><label class="switch"><input type="checkbox" id="chSwitch" onchange="tog('inpChannel')"><span class="slider"></span></label></div><input type="text" id="inpChannel" class="inp-mini" placeholder="Your Telegram Channel Link">

                    <input type="text" id="botToken" class="inp-key" style="text-align:left; font-size:11px; margin:5px 0;" placeholder="BOT TOKEN">
                    <div style="display:flex; gap:5px; align-items:center;"><input type="text" id="chatId" class="inp-key" style="text-align:left; font-size:11px; margin:5px 0;" placeholder="YOUR CHAT ID"><button class="btn-hacker" style="padding:5px; width:80px; font-size:11px; margin:0;" onclick="verifyChatId()">VERIFY</button></div>
                    <button class="btn-hacker" onclick="saveCfg()" style="margin-top:10px;">SAVE CONFIG</button>
                </div>
            </div>
        </div>

        <div class="bottom-nav" id="btmNav">
            <div class="nav-item active" onclick="switchTab('tabHome', this)"><i class="fas fa-home"></i><span>HOME</span></div>
            <div class="nav-item" onclick="switchTab('tabGame', this)"><i class="fas fa-gamepad"></i><span>GAME</span></div>
            <div class="nav-item" onclick="switchTab('tabVip', this)"><i class="fas fa-crown"></i><span>VIP</span></div>
            <div class="nav-item" onclick="switchTab('tabHistory', this)"><i class="fas fa-history"></i><span>HISTORY</span></div>
            <div class="nav-item" onclick="switchTab('tabSettings', this)"><i class="fas fa-cog"></i><span>CONFIG</span></div>
        </div>

    </div>

    <div id="toast"></div>
    <audio id="alertSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <script>
        // --- SECURITY LOGIC (ENCRYPTED) ---
        const SECRET_SALT = "RATHORE_GOD_MODE_SECURE_V40";
        function getDeviceId() {
            let id = localStorage.getItem("rathore_device_id");
            if (!id) {
                id = Math.floor(1000 + Math.random() * 9000) + "-" + Math.floor(1000 + Math.random() * 9000) + "-" + Math.floor(1000 + Math.random() * 9000);
                localStorage.setItem("rathore_device_id", id);
            }
            return id;
        }
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) { const char = str.charCodeAt(i); hash = (hash << 5) - hash + char; hash |= 0; }
            return Math.abs(hash).toString(16);
        }

        const myDeviceId = getDeviceId();
        document.getElementById("deviceIdDisplay").innerText = myDeviceId;

        const savedKey = localStorage.getItem("rathore_license_key");
        if(savedKey) verifyKey(savedKey, true);

        function copyDeviceId() {
            navigator.clipboard.writeText(myDeviceId);
            Swal.fire({ toast: true, position: 'top', icon: 'success', title: 'ID COPIED! SEND TO ADMIN', showConfirmButton: false, timer: 2000, background: '#111', color: '#fff' });
        }
        function validateLicense() {
            const key = document.getElementById("inputKey").value.trim();
            if(!key) return alert("ENTER KEY");
            verifyKey(key, false);
        }
        function verifyKey(key, silent) {
            try {
                const decoded = atob(key);
                const parts = decoded.split("|");
                if(parts.length !== 2) throw new Error("Invalid Format");
                const expiryDate = parts[0]; 
                const signature = parts[1];
                const expectedSignature = simpleHash(myDeviceId + expiryDate + SECRET_SALT);

                if (signature === expectedSignature) {
                    const today = new Date().toISOString().split('T')[0];
                    if (expiryDate >= today) unlockApp(key);
                    else { if(!silent) Swal.fire({ icon: 'error', title: 'EXPIRED', text: 'Renew License', background: '#000', color: '#fff' }); localStorage.removeItem("rathore_license_key"); }
                } else { if(!silent) Swal.fire({ icon: 'error', title: 'INVALID KEY', text: 'Not for this device!', background: '#000', color: '#fff' }); }
            } catch(e) { if(!silent) Swal.fire({ icon: 'error', title: 'ERROR', text: 'Invalid Key Format', background: '#000', color: '#fff' }); }
        }
        
        function unlockApp(key) {
            localStorage.setItem("rathore_license_key", key);
            document.getElementById("securityScreen").style.display = "none";
            document.getElementById("mainApp").style.display = "block";
            app.active = false; 
            initFlowerRain();
            initTicker(); 
            initUserCounter();
        }

        // --- NEW FEATURE SCRIPTS (TICKER, COUNTER, CALC) ---
        function initTicker() {
            const names = ["Ravi", "Amit", "Rahul", "Priya", "Sneha", "Vikram", "Arjun", "Karan", "Sandeep", "Vikas"];
            const games = ["Daman", "91Club", "TC", "Goa", "BigDaddy"];
            const t = document.getElementById('winnerTicker');
            let html = "";
            for(let i=0; i<20; i++) {
                const n = names[Math.floor(Math.random()*names.length)];
                const g = games[Math.floor(Math.random()*games.length)];
                const a = Math.floor(Math.random()*4000) + 500;
                html += `<div class="ticker-item">${n} won <span class="win-amt">‚Çπ${a}</span> in ${g}</div>`;
            }
            t.innerHTML = html;
        }

        function initUserCounter() {
            setInterval(() => {
                const c = Math.floor(Math.random() * (1500 - 1200) + 1200);
                document.getElementById('onlineUsers').innerText = c;
            }, 4000);
        }

        function calcMartingale() {
            const base = parseInt(document.getElementById('baseBet').value);
            if(!base) return;
            let html = `<div class="calc-row"><b style="color:var(--gold)">LEVEL</b><b>BET AMOUNT</b></div>`;
            let bet = base;
            for(let i=1; i<=6; i++) {
                html += `<div class="calc-row"><span>Level ${i}</span><span style="color:#00ff41">‚Çπ${bet}</span></div>`;
                bet = bet * 3; 
            }
            document.getElementById('calcResults').innerHTML = html;
        }

        function updatePatternVis(list) {
            const html = list.slice(0, 10).map(r => {
                const s = getBigSmall(r.number);
                return `<div class="pattern-dot ${s==='BIG'?'dot-b':'dot-s'}"></div>`;
            }).reverse().join('');
            document.getElementById('patternVis').innerHTML = html;
        }

        // FIX: FIXED IMAGE LINKS (RELIABLE PLACEHOLDERS)
        const GAMES = [
            { name: "DAMAN GAME", img: "https://cdn-icons-png.flaticon.com/512/2643/2643590.png", link: "https://damanworld.top/#/register?invitationCode=613534185076" },
            { name: "JALWA CLUB", img: "https://cdn-icons-png.flaticon.com/512/1067/1067357.png", link: "https://jalwaclub3.com/#/register?invitationCode=562647318340" },
            { name: "OK WIN", img: "https://cdn-icons-png.flaticon.com/512/3662/3662817.png", link: "https://okwinn.work/register?invitationCode=842642415271" },
            { name: "91 CLUB", img: "https://cdn-icons-png.flaticon.com/512/1168/1168582.png", link: "https://www.surat91.com/#/register?invitationCode=4641517434173" },
            { name: "51 GAME", img: "https://cdn-icons-png.flaticon.com/512/8065/8065360.png", link: "https://www.51gamek.com/#/register?invitationCode=26261103525" },
            { name: "RAJA PARTY", img: "https://cdn-icons-png.flaticon.com/512/3662/3662817.png", link: "https://www.rajaparty8.com/#/register?invitationCode=83851128686" },
            { name: "SIKKIM GAME", img: "https://cdn-icons-png.flaticon.com/512/1168/1168582.png", link: "https://www.1sikkim.com/#/register?invitationCode=21155363278" },
            { name: "GOA GAME", img: "https://cdn-icons-png.flaticon.com/512/8065/8065360.png", link: "http://www.goaok.link/#/register?invitationCode=81344380756" },
            { name: "LOTTERY 7", img: "https://cdn-icons-png.flaticon.com/512/2643/2643590.png", link: "https://www.lottery7kk.com/#/register?invitationCode=364622670994" }
        ];

        const ASSETS = {
            START: 'https://ibb.co/zHxjqLCz', 
            STOP: 'https://ibb.co/MyyzwtHp',
            IMG_30: 'https://ibb.co/0yZvp9Yq', 
            IMG_60: 'https://ibb.co/NgGhgDKL', 
            SKIP: 'https://ibb.co/Yj541fN',
            WIN_FIRST: "CAACAgUAAxkBAAEDEC9pCVVRUpjzq5JD0Xds7EfRQje15wACuxMAAtZgYVZaFxCncOnSvh4E",
            WIN_MIDDLE: ["CAACAgUAAxkBAAEDEDdpCXsDjwGlCNvT7EOetSaVSckH-AACvhIAAl2EYFYRGskC145Gkh4E","CAACAgUAAxkBAAEDED9pCXtTSZDN91Ecw6ubgma2zRye4AACdRUAAixnYVYGODMz3GAhmh4E","CAACAgUAAxkBAAEDEEJpCXtukJIYrmQjt6gQdbEwgXR9IAACWBkAAmvFoFeR0XR5LtIzCR4E"],
            WIN_LAST: "CAACAgUAAxkBAAEDEGJpC0WiOqBSFlY2k_zURD0W1XUpEQAC0xMAAtJlYVZ8CDYuQ-4m-B4E",
            LOSS: ["CAACAgQAAxkBAAEDEGxpC0W_HrRKrdK-RPSd89tA9OJ-CgACUA8AAmWGgFDT7olWti1e2h4E","CAACAgUAAxkBAAEDEUNpELLwfisH8fMa8RAH481Ui_6pcwACoBoAAnliGVS2SjPOJAYbeR4E"]
        };
        const API_URLS = { 30: 'https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json', 60: 'https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json', 180: 'https://draw.ar-lottery01.com/WinGo/WinGo_3M/GetHistoryIssuePage.json', 300: 'https://draw.ar-lottery01.com/WinGo/WinGo_5M/GetHistoryIssuePage.json' };

        let app = { 
            active: false, timer: 30, lastPeriod: null, prediction: null, profit: 0, 
            predCount: 0, limit: 0, currentGame: GAMES[0].name, mainServer: 'TITANIUM', subServer: 'A', 
            lossStreak: 0, username: "USER", userPic: "", botHistory: [], connected: false,
            periodsToSkip: 0, alternatingLossStreak: 0
        };
        let loopInterval, graphInterval;
        let selectedRating = 0;

        window.onload = () => { loadCfg(); initSlider(); loadProfile(); updateStats(); };

        function loadProfile() {
            const name = localStorage.getItem('rathore_name') || 'DAKSH RATHORE';
            const pic = localStorage.getItem('rathore_pic');
            document.getElementById('headerName').innerText = name.toUpperCase();
            document.getElementById('profileName').innerText = name.toUpperCase();
            document.getElementById('inputNewName').value = name;
            if(pic) {
                document.getElementById('headerAvatar').style.backgroundImage = `url('${pic}')`;
                document.getElementById('settingsAvatar').style.backgroundImage = `url('${pic}')`;
            } else {
                const def = "https://cdn-icons-png.flaticon.com/512/149/149071.png";
                document.getElementById('headerAvatar').style.backgroundImage = `url('${def}')`;
                document.getElementById('settingsAvatar').style.backgroundImage = `url('${def}')`;
            }
        }

        function processImage(input) {
            const file = input.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.src = e.target.result;
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    canvas.width = 100;
                    canvas.height = 100;
                    ctx.drawImage(img, 0, 0, 100, 100);
                    const dataUrl = canvas.toDataURL('image/jpeg', 0.7);
                    localStorage.setItem('rathore_pic', dataUrl);
                    loadProfile();
                    showToast("PROFILE PIC UPDATED!");
                }
            }
            reader.readAsDataURL(file);
        }

        function manualUpdateProfile() { const name = document.getElementById('inputNewName').value; if(name) { localStorage.setItem('rathore_name', name); loadProfile(); showToast("PROFILE UPDATED"); } }
        function removePhoto() { localStorage.removeItem('rathore_pic'); loadProfile(); showToast("PHOTO REMOVED"); }
        function updateStats() { 
            document.getElementById('displayProfit').innerText = `‚Çπ${Math.floor(app.profit)}`;
            let w = (app.profit / 5000) * 100; if(w>100) w=100; if(w<0) w=0;
            document.getElementById('targetBar').style.width = w + "%"; 
        }

        function initSlider() { document.getElementById('gameSlider').innerHTML = GAMES.map((g,i) => `<div class="slide-card" onclick="loadGame(${i})"><img src="${g.img}" class="slide-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1168/1168582.png'"><div class="slide-overlay">${g.name}</div></div>`).join(''); }
        
        function loadGame(i) {
            app.currentGame = GAMES[i].name;
            app.connected = true;
            Swal.fire({ toast: true, position: 'top', icon: 'success', title: `CONNECTED TO ${app.currentGame}`, showConfirmButton: false, timer: 1500, background: '#000', color: '#00ff41' });
            document.getElementById('gameFrame').src = GAMES[i].link;
            switchTab('tabGame', document.querySelectorAll('.nav-item')[1]);
            document.getElementById('srvConnectMsg').innerText = "SYSTEM ACTIVE";
            document.getElementById('srvConnectMsg').style.color = "var(--theme-color)";
            document.getElementById('srvConnectMsg').style.display = "block";
            document.getElementById('serverStatusDisplay').innerText = "SERVER: ONLINE (TITANIUM)";
            document.getElementById('serverStatusDisplay').style.color = "#00ff41";
            
            if(loopInterval) clearInterval(loopInterval);
            if(graphInterval) clearInterval(graphInterval);
            loopInterval = setInterval(loop, 1000);
            graphInterval = setInterval(updateRealGraphs, 2000);
            updateRealGraphs(); 
        }

        function setTheme(c) { document.documentElement.style.setProperty('--theme-color', c); localStorage.setItem('theme_color_v24', c); document.documentElement.style.setProperty('--border', `1px solid ${c}`); }
        
        // --- FLOWER RAIN LOGIC (FIXED LOOP) ---
        let flowerInterval;
        function initFlowerRain() {
            if(document.getElementById('flowerSwitch') && document.getElementById('flowerSwitch').checked) {
                toggleFlowers();
            }
        }

        function toggleFlowers() {
            const on = document.getElementById('flowerSwitch').checked;
            const container = document.getElementById('flowerContainer');
            if(on) {
                container.style.display = 'block';
                if(flowerInterval) clearInterval(flowerInterval);
                flowerInterval = setInterval(createFlower, 400); // Continuous creation
            } else {
                container.style.display = 'none';
                clearInterval(flowerInterval);
                container.innerHTML = '';
            }
        }

        function createFlower() {
            const l = document.getElementById('flowerContainer');
            const flowers = ['üå∏','üåπ','üåª','üå∑','üåº'];
            const f = document.createElement('div');
            f.className = 'flower';
            f.innerText = flowers[Math.floor(Math.random()*flowers.length)];
            f.style.left = Math.random()*100 + 'vw';
            f.style.animationDuration = Math.random()*3+3 + 's';
            l.appendChild(f);
            setTimeout(()=>f.remove(), 6000);
        }

        // --- HARD DISCO MODE (NEW) ---
        function toggleHardDisco() {
            const on = document.getElementById('hardDiscoSwitch').checked;
            if(on) document.body.classList.add('hard-disco-active');
            else document.body.classList.remove('hard-disco-active');
        }

        // --- FEEDBACK LOGIC (NO TOKEN) ---
        function rate(n) {
            selectedRating = n;
            document.querySelectorAll('.star').forEach((s, i) => {
                if(i < n) s.classList.add('selected'); else s.classList.remove('selected');
            });
        }
        function sendFeedback() {
            if(selectedRating === 0) return showToast("SELECT STARS FIRST");
            const msg = document.getElementById('feedMsg').value;
            const finalTxt = `üåü RATING: ${selectedRating}/5 \nüë§ USER: ${document.getElementById('headerName').innerText}\nüí¨ MESSAGE: ${msg}`;
            const url = `https://t.me/cvzus?text=${encodeURIComponent(finalTxt)}`;
            window.open(url, '_blank');
        }

        async function updateRealGraphs() {
            if(!app.connected) return;
            try { 
                const res = await fetch(`${API_URLS[app.timer]}?ts=${Date.now()}`); 
                const data = (await res.json()).data.list; 
                if(!data) return;

                setMeter('meterStab', 'txtStab', Math.floor(Math.random()*20 + 70)); 
                setMeter('meterTrend', 'txtTrend', Math.floor(Math.random()*20 + 70)); 
                setMeter('meterPower', 'txtPower', 99);

                document.querySelectorAll('.ball-item').forEach(b=>b.classList.remove('active'));
                const lastNum = parseInt(data[0].number);
                document.getElementById('ball-'+lastNum).classList.add('active');

                // --- HOT NUMBER GRAPH LOGIC ---
                let counts = Array(10).fill(0);
                data.slice(0, 50).forEach(x => counts[parseInt(x.number)]++);
                const maxVal = Math.max(...counts);
                const bestNum = counts.indexOf(maxVal);

                document.getElementById('numGraphBox').innerHTML = counts.map((c, i) => {
                    let h = (c / maxVal) * 100; if(h < 15) h = 15;
                    let isLocked = (i !== bestNum && h < 50); let isHot = (i === bestNum);
                    let barClass = 'num-bar'; if(isHot) barClass += ' hot'; else if(isLocked) barClass += ' locked';
                    return `<div class="num-bar-col"><div class="num-bar-val">${c}</div><div class="${barClass}" style="height:${isLocked?20:h}%;"></div><div class="num-bar-label">${i}</div></div>`;
                }).join('');
            } catch(e){ console.log("API ERROR: " + e); }
        }

        function setMeter(cid, tid, val) { const c = document.getElementById(cid); const o = (2 * Math.PI * 28) * (1 - val/100); c.style.strokeDashoffset = o; document.getElementById(tid).innerText = val + "%"; }
        
        function selMain(id, el) { 
            document.querySelectorAll('.srv-btn').forEach(b => b.classList.remove('active')); 
            el.classList.add('active'); 
            app.mainServer = el.innerText;
            const msg = document.getElementById('srvConnectMsg');
            msg.style.display = 'block'; msg.innerText = "CONNECTING..."; msg.style.color = "#fff";
            setTimeout(() => { 
                msg.innerText = `CONNECTED: ${app.mainServer}`; 
                msg.style.color = "var(--theme-color)"; 
                showToast("SERVER CONNECTED"); 
                document.getElementById('serverStatusDisplay').innerText = "SERVER: ONLINE (" + app.mainServer + ")";
                document.getElementById('serverStatusDisplay').style.color = "#00ff41";
            }, 1500);
        }
        function selSub(id, el) { document.querySelectorAll('.sub-btn').forEach(b => b.classList.remove('active')); el.classList.add('active'); app.subServer = id; }
        
        function setTimer(s, el) { 
            app.timer = s; 
            document.querySelectorAll('.timer-btn').forEach(b => b.classList.remove('active')); 
            el.classList.add('active'); 
            if(app.connected) updateRealGraphs();
        }

        // ==========================================
        // V51 TITANIUM LOGIC (UPGRADED)
        // ==========================================
        const BIG_NUMBERS = [5, 6, 7, 8, 9];
        const SMALL_NUMBERS = [0, 1, 2, 3, 4];

        function getBigSmall(number) {
            if (BIG_NUMBERS.includes(parseInt(number))) return "BIG";
            if (SMALL_NUMBERS.includes(parseInt(number))) return "SMALL";
            return "N/A";
        }

        // New Logic: Check Pattern Repetition
        function analyzeTrend(history) {
            // Converts history to array of 'B' or 'S'
            const seq = history.slice(0, 12).map(r => getBigSmall(r.number) === 'BIG' ? 'B' : 'S');
            
            // Pattern 1: AABB (B B S S)
            if (seq[0] === seq[1] && seq[2] === seq[3] && seq[0] !== seq[2]) return seq[2] === 'B' ? 'SMALL' : 'BIG';
            
            // Pattern 2: ABAB (B S B S)
            if (seq[0] !== seq[1] && seq[1] !== seq[2] && seq[2] !== seq[3]) return seq[0] === 'B' ? 'SMALL' : 'BIG';

            // Pattern 3: Streak (BBB or SSS)
            if (seq[0] === seq[1] && seq[1] === seq[2]) return seq[0] === 'B' ? 'BIG' : 'SMALL'; // Trend Follow

            return null; // No strong pattern
        }

        function getColdNumberInSize(size, history) {
            const targetNumbers = (size === "BIG") ? BIG_NUMBERS : SMALL_NUMBERS;
            const last100Numbers = history.slice(0, 100).map(r => parseInt(r.number)); 
            const numberCounts = {};
            for (const num of targetNumbers) { numberCounts[num] = 0; }
            for (const num of last100Numbers) {
                if (targetNumbers.includes(num)) { numberCounts[num] = (numberCounts[num] || 0) + 1; }
            }
            let coldNumber = targetNumbers[0];
            let minNumCount = Infinity;
            for (const num of targetNumbers) {
                const count = numberCounts[num];
                if (count < minNumCount) { minNumCount = count; coldNumber = num; } 
                else if (count === minNumCount) { if (num < coldNumber) coldNumber = num; }
            }
            return coldNumber;
        }

        function getTitaniumPrediction(last100Results) {
            if (last100Results.length < 8) return { action: "Analyze", text: "Analyzing..." };
            
            if (app.periodsToSkip > 0) {
                return { action: "Skip", skipReason: `Cooldown (${app.periodsToSkip} left)` };
            }

            const patternPrediction = analyzeTrend(last100Results);
            const safeMode = document.getElementById('safeModeSwitch') && document.getElementById('safeModeSwitch').checked;

            if (patternPrediction) {
                const coldNum = getColdNumberInSize(patternPrediction, last100Results);
                return { action: "Predict", predictedSize: patternPrediction, predictedNumber: coldNum, confidence: 90 };
            }

            // Fallback to basic counting if no pattern
            const last8Results = last100Results.slice(0, 8);
            const last8Sizes = last8Results.map(r => getBigSmall(r.number));
            
            const bigCount = last8Sizes.filter(s => s === "BIG").length;
            const smallCount = last8Sizes.filter(s => s === "SMALL").length;
            
            let predictedSizeBalanced;
            if (bigCount !== smallCount) { 
                predictedSizeBalanced = (bigCount > smallCount) ? "SMALL" : "BIG"; // Counter the surge
            } else { 
                predictedSizeBalanced = last8Sizes[0] === "BIG" ? "SMALL" : "BIG"; 
            }

            if(safeMode && Math.abs(bigCount - smallCount) < 2) {
                 return { action: "Skip", skipReason: "Safe Mode: No clear trend" };
            }
            
            const coldNum = getColdNumberInSize(predictedSizeBalanced, last100Results);
            return { action: "Predict", predictedSize: predictedSizeBalanced, predictedNumber: coldNum, confidence: 60 };
        }

        async function processPrediction() {
            if(!app.connected) return;
            if(app.limit > 0 && app.predCount >= app.limit) { toggleSession(); showToast("LIMIT REACHED"); return; }
            
            try {
                const res = await fetch(`${API_URLS[app.timer]}?ts=${Date.now()}`);
                const data = await res.json();
                const list = data.data.list;
                const nextIssue = (BigInt(list[0].issueNumber)+1n).toString();
                
                if(app.lastPeriod === nextIssue) return;
                
                if (app.periodsToSkip > 0) app.periodsToSkip--;

                app.lastPeriod = nextIssue; 

                // UPDATE PATTERN VIS
                updatePatternVis(list);
                
                const historyForAI = list.slice(0, 100).map(x => ({ number: x.number, period: x.issueNumber }));
                const prediction = getTitaniumPrediction(historyForAI);
                
                let displayValue = "WAIT";
                let statusClass = "wait";
                let coldTxt = "ANALYZING...";

                if(prediction.action === "Skip") {
                    displayValue = "SKIP";
                    statusClass = "skip";
                    coldTxt = prediction.skipReason;
                    app.prediction = { period: nextIssue, value: "SKIP", status: 'SKIPPED', confidence: 0 };
                } else if(prediction.action === "Predict") {
                    displayValue = prediction.predictedSize;
                    statusClass = (displayValue === "BIG") ? "big" : "small";
                    coldTxt = "COLD NUM: " + prediction.predictedNumber;
                    document.getElementById('ball-'+prediction.predictedNumber).classList.add('cold-active');
                    
                    if(document.getElementById('colorSwitch').checked) {
                        displayValue = (displayValue === "BIG") ? "üü¢ GREEN" : "üî¥ RED";
                    }
                    if(document.getElementById('reverseSwitch').checked) {
                         if(document.getElementById('colorSwitch').checked) {
                             displayValue = (displayValue === "BIG") ? "üî¥ RED" : "üü¢ GREEN";
                             statusClass = (displayValue === "BIG") ? "small" : "big";
                         } else {
                             displayValue = (displayValue === "BIG") ? "SMALL" : "BIG";
                             statusClass = (displayValue === "BIG") ? "small" : "big";
                         }
                    }

                    app.prediction = { 
                        period: nextIssue, 
                        value: prediction.predictedSize, 
                        status: 'PENDING', 
                        confidence: prediction.confidence 
                    }; 
                }

                app.predCount++;
                app.botHistory.unshift({ period: nextIssue, pred: displayValue, result: '?', status: 'WAIT' });
                updateHistoryTable();

                document.getElementById('periodNum').innerText = nextIssue.slice(-5);
                document.getElementById('resultText').className = `result-display ${statusClass}`;
                document.getElementById('resultText').innerText = displayValue;
                
                document.getElementById('targetDisplay').innerText = "TITANIUM V51 ENGINE";
                const cd = document.getElementById('coldNumDisplay');
                cd.style.display='block'; cd.innerText = coldTxt;
                
                if(document.getElementById('aiGlowSwitch').checked && statusClass !== 'skip' && statusClass !== 'wait') {
                    document.getElementById('resultText').classList.add('ai-glow');
                    const ov = document.getElementById('aiOverlay');
                    ov.style.display='block';
                    ov.className = `ai-overlay ${statusClass === 'big' ? 'active-win' : 'active-loss'}`;
                    setTimeout(()=>ov.style.display='none', 4000);
                }
                
                if(document.getElementById('soundSwitch').checked) document.getElementById('alertSound').play();
                
                if(document.getElementById('tgSwitch').checked) sendTgMessage(nextIssue, displayValue, coldTxt);

            } catch(e) { console.log("FETCH ERR", e); }
        }

        async function checkResult() {
            if(!app.prediction || app.prediction.status !== 'PENDING') return;
            try {
                const res = await fetch(`${API_URLS[app.timer]}?ts=${Date.now()}`);
                const list = (await res.json()).data.list;
                const r = list.find(x => x.issueNumber === app.prediction.period);
                if(r) {
                    const actualNum = parseInt(r.number);
                    const actualSize = actualNum >= 5 ? "BIG" : "SMALL";
                    
                    let userPlayed = app.prediction.value; 
                    let finalUserBet = userPlayed; 
                    if(document.getElementById('reverseSwitch').checked) finalUserBet = (userPlayed==="BIG")?"SMALL":"BIG";

                    const win = actualSize === finalUserBet;
                    
                    app.prediction.status = win ? 'WIN' : 'LOSS';
                    app.botHistory[0].result = actualSize;
                    app.botHistory[0].status = win ? 'WIN' : 'LOSS';
                    updateHistoryTable();

                    if(win) { 
                        app.profit += 100; app.lossStreak = 0; showPopup(true, r.number);
                        app.periodsToSkip = 0; 
                        if(document.getElementById('tgSwitch').checked) sendWinSequence(); 
                    } else { 
                        app.profit -= 50; app.lossStreak++; showPopup(false, r.number);
                        if(app.prediction.confidence <= 50) { app.periodsToSkip = 1; }
                        if(document.getElementById('tgSwitch').checked) sendStickerRaw(ASSETS.LOSS[Math.floor(Math.random()*ASSETS.LOSS.length)]);
                    }
                    updateStats();
                }
            } catch(e) {}
        }
        
        function updateHistoryTable() {
            const t = document.getElementById('historyTable');
            t.innerHTML = app.botHistory.map(h => {
                const color = h.status === 'WIN' ? 'var(--theme-color)' : (h.status === 'LOSS' ? 'var(--red)' : '#fff');
                return `<tr>
                    <td style="border-bottom:1px solid #333; padding:8px;">${h.period.slice(-5)}</td>
                    <td style="border-bottom:1px solid #333;">${h.pred}</td>
                    <td style="border-bottom:1px solid #333;">${h.result}</td>
                    <td style="border-bottom:1px solid #333; color:${color}; font-weight:900;">${h.status}</td>
                </tr>`;
            }).join('');
        }

        function showPopup(win, num) {
            const p = document.getElementById('resultPopup');
            const t = document.getElementById('popTitle');
            const n = document.getElementById('popNum');
            p.className = win ? 'win-mode' : 'loss-mode';
            t.innerText = win ? 'WIN üèÜ' : 'LOSS üíî';
            n.innerText = num;
            p.style.display = 'flex'; setTimeout(() => { p.style.display='none'; }, 3000);
        }

        async function loop() {
            const rem = app.timer - (new Date().getSeconds() % app.timer);
            document.getElementById('timer').innerText = `00:${rem<10?'0'+rem:rem}`;
            if(app.active && app.connected) { 
                if(rem === (app.timer==30?29:59)) processPrediction(); 
                if(rem <= 5) checkResult(); 
            }
        }

        function togDJ() {
            const on = document.getElementById('djSwitch').checked;
            if(on) document.body.classList.add('disco-active');
            else document.body.classList.remove('disco-active');
        }

        async function sendWinSequence() { 
            const t=document.getElementById('botToken').value, c=document.getElementById('chatId').value;
            if(!t || !c) return;
            await sendStickerRaw(ASSETS.WIN_FIRST);
            await new Promise(r => setTimeout(r, 1000));
            await sendStickerRaw(ASSETS.WIN_MIDDLE[Math.floor(Math.random()*ASSETS.WIN_MIDDLE.length)]);
            await new Promise(r => setTimeout(r, 1000));
            await sendStickerRaw(ASSETS.WIN_LAST);
        }
        async function sendTgMessage(period, pred, cold) {
            const t = document.getElementById('botToken').value, c = document.getElementById('chatId').value;
            if(!t || !c) return;
            const imgUrl = (app.timer === 30) ? ASSETS.IMG_30 : ASSETS.IMG_60;
            let msg = `‚ñà‚ñì‚ñí‚ñë‚úß‚ú¶ WŒ£LC√òMŒ£ ‚ú¶‚úß‚ñë‚ñí‚ñì‚ñà\n‚ïî‚ïê‚óà‚ïê‚óà‚ïê‚óà‚ïê‚óà‚ïê‚óà‚ïê‚ïó\nDate : ${new Date().toLocaleDateString()}\nGame : ${app.currentGame}\nWingo : ${app.timer/60}Min\nPeriod No : ${period.slice(-4)}\n‚ïö‚ïê‚óà‚ïê‚óà‚ïê‚óà‚ïê‚óà‚ïê‚óà‚ïê‚ïù\nùó•ùóòùó¶ùó®ùóüùóß ùóúùó°ùóôùó¢\nPrediction : ‚û® ${pred}\n${cold}\n`;
            if(document.getElementById('tagSwitch').checked) msg += `\n${document.getElementById('inpTags').value}`;
            if(document.getElementById('giftSwitch').checked) msg += `\nüéÅ *Code:* ${document.getElementById('inpGift').value}`;
            if(document.getElementById('invSwitch').checked) msg += `\nüîó *Link:* ${document.getElementById('inpInvite').value}`;
            msg += `\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ú¶‚úß‚ú¶‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n‚ú¶ POWERED BY ‚ú¶\n ‰∫ó ùêÉ·¥Ä·¥ãs ú ùêë·¥Ä·¥õ ú·¥è Ä·¥á íÜú√óÕú√ó`;
            let markup = {};
            if(document.getElementById('chSwitch').checked && document.getElementById('inpChannel').value) { markup = { inline_keyboard: [[{ text: "üöÄ JOIN OFFICIAL CHANNEL", url: document.getElementById('inpChannel').value }]] }; }
            try { 
                const url = `https://api.telegram.org/bot${t}/sendPhoto?chat_id=${c}&photo=${imgUrl}&caption=${encodeURIComponent(msg)}&parse_mode=Markdown`;
                const r1 = await fetch(url);
                const r1d = await r1.json();
                if(markup.inline_keyboard) { await fetch(`https://api.telegram.org/bot${t}/editMessageCaption?chat_id=${c}&message_id=${r1d.result.message_id}&caption=${encodeURIComponent(msg)}&parse_mode=Markdown&reply_markup=${encodeURIComponent(JSON.stringify(markup))}`); }
            } catch(e){}
        }
        async function sendStickerRaw(id) { const t=document.getElementById('botToken').value, c=document.getElementById('chatId').value; if(t && c) try { await fetch(`https://api.telegram.org/bot${t}/sendSticker?chat_id=${c}&sticker=${id}`); } catch(e){} }
        async function sendTgPhoto(caption, url) { const t = document.getElementById('botToken').value, c = document.getElementById('chatId').value; if(t && c) try { await fetch(`https://api.telegram.org/bot${t}/sendPhoto?chat_id=${c}&photo=${url}&caption=${encodeURIComponent(caption)}`); } catch(e){} }

        function toggleSession() { 
            if(!app.connected) return Swal.fire({ icon: 'error', title: 'SELECT GAME FIRST', text: 'Click on a game logo above', background: '#000', color: '#fff' });
            app.active = !app.active; 
            document.getElementById('sessionBtn').innerHTML = app.active ? '<i class="fas fa-stop"></i> STOP' : '<i class="fas fa-rocket"></i> START'; 
            document.getElementById('sessionBtn').classList.toggle('btn-stop'); 
            if(app.active) {
                app.predCount = 0;
                if(document.getElementById('tgSwitch').checked) sendTgPhoto("üöÄ *SESSION STARTED* \n\nGood Luck!", ASSETS.START);
            } else {
                if(document.getElementById('tgSwitch').checked) sendTgPhoto("üõë *SESSION STOPPED*", ASSETS.STOP);
            }
        }
        function tog(id) { const e=document.getElementById(id); e.style.display = e.style.display==='block'?'none':'block'; }
        function togProfit() { document.getElementById('profitBox').style.display = document.getElementById('profitSwitch').checked ? 'block':'none'; }
        function togRGB() { const on = document.getElementById('rgbSwitch').checked; const el = document.getElementById('rgbBorder'); if(on) el.classList.add('active'); else el.classList.remove('active'); }
        
        function switchTab(t, el) { document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active')); document.getElementById(t).classList.add('active'); if(el) { document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active')); el.classList.add('active'); } }
        function showToast(m) { const t=document.getElementById('toast'); t.innerText=m; t.className="show"; setTimeout(()=>t.className="",3000); }
        function saveCfg() { localStorage.setItem('cfg_v25', JSON.stringify({ token: document.getElementById('botToken').value, chat: document.getElementById('chatId').value, limit: document.getElementById('inpLimit').value, profitTog: document.getElementById('profitSwitch').checked, aiGlow: document.getElementById('aiGlowSwitch').checked, rgb: document.getElementById('rgbSwitch').checked, dj: document.getElementById('djSwitch').checked, cold: document.getElementById('coldSwitch').checked, sound: document.getElementById('soundSwitch').checked, color: document.getElementById('colorSwitch').checked, season: document.getElementById('seasonSwitch').checked, tags: document.getElementById('inpTags').value, gift: document.getElementById('inpGift').value, invite: document.getElementById('inpInvite').value, chLink: document.getElementById('inpChannel').value, chTog: document.getElementById('chSwitch').checked, reverse: document.getElementById('reverseSwitch').checked, feedTog: document.getElementById('feedSwitch').checked, safeMode: document.getElementById('safeModeSwitch').checked })); app.limit = parseInt(document.getElementById('inpLimit').value) || 0; showToast("CONFIG SAVED"); togDJ(); }
        function loadCfg() { const c = JSON.parse(localStorage.getItem('cfg_v25')||'{}'); if(c.token) document.getElementById('botToken').value = c.token; if(c.chat) document.getElementById('chatId').value = c.chat; if(c.limit) document.getElementById('inpLimit').value = c.limit; if(c.tags) document.getElementById('inpTags').value = c.tags; if(c.gift) document.getElementById('inpGift').value = c.gift; if(c.invite) document.getElementById('inpInvite').value = c.invite; if(c.chLink) document.getElementById('inpChannel').value = c.chLink; if(c.chTog) { document.getElementById('chSwitch').checked = true; tog('inpChannel'); } if(c.profitTog) { document.getElementById('profitSwitch').checked=true; togProfit(); } if(c.aiGlow) document.getElementById('aiGlowSwitch').checked = true; if(c.rgb) { document.getElementById('rgbSwitch').checked=true; togRGB(); } if(c.dj) { document.getElementById('djSwitch').checked=true; togDJ(); } if(c.cold) document.getElementById('coldSwitch').checked=true; if(c.sound) document.getElementById('soundSwitch').checked=true; if(c.color) document.getElementById('colorSwitch').checked=true; if(c.season) document.getElementById('seasonSwitch').checked=true; if(c.reverse) document.getElementById('reverseSwitch').checked=true; if(c.safeMode) document.getElementById('safeModeSwitch').checked=true; if(c.feedTog) { document.getElementById('feedSwitch').checked = true; tog('feedBoxUi'); } const theme = localStorage.getItem('theme_color_v24'); if(theme) setTheme(theme); }
        async function verifyChatId() { const t = document.getElementById('botToken').value, c = document.getElementById('chatId').value; try { await fetch(`https://api.telegram.org/bot${t}/sendMessage?chat_id=${c}&text=ARE YOU READY`); alert("MESSAGE SENT"); } catch(e) { alert("ERROR"); } }

        // --- SPARROW GAME LOGIC (VERTICAL 9:16 + IDLE ANIMATION) ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let bird = {x: 50, y: 250, dy: 0, size: 20}; // Starting Y lower for vertical view
        let pipes = [];
        let score = 0;
        let gameActive = false;
        let frame = 0;
        let highScore = localStorage.getItem('rathore_game_high') || 0;
        document.getElementById('gBest').innerText = highScore;

        function idleLoop() {
            if(gameActive) return;
            // Idle Animation: Hover Bird
            ctx.fillStyle = "#111"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw Bird Hovering
            const hoverY = 250 + Math.sin(Date.now() / 200) * 10;
            ctx.fillStyle = "#00ff41"; 
            ctx.fillRect(50, hoverY, 20, 20);
            
            // Draw Text
            ctx.fillStyle = "#fff"; ctx.font = "20px Rajdhani"; ctx.textAlign = "center";
            ctx.fillText("PRESS PLAY", 150, 150);
            
            requestAnimationFrame(idleLoop);
        }
        
        // Start Idle Animation immediately
        idleLoop();

        function startGame() {
            if(gameActive) { 
                bird.dy = -6; // Stronger jump for taller screen
            } else { 
                bird.y = 250; bird.dy = 0; pipes = []; score = 0; frame = 0; gameActive = true; 
                document.getElementById('gScore').innerText = 0;
                loopGame(); 
            }
        }

        function loopGame() {
            if(!gameActive) return;
            bird.dy += 0.3; bird.y += bird.dy; frame++;
            
            // Pipe Logic
            if(frame % 120 === 0) { 
                let gap = 120; // Gap size
                let h = Math.random() * (canvas.height - gap - 50) + 20; 
                pipes.push({x: canvas.width, top: h, gap: gap, passed: false}); 
            }
            
            ctx.fillStyle = "#111"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#00ff41"; ctx.fillRect(bird.x, bird.y, bird.size, bird.size);
            ctx.fillStyle = "#ff0055"; 
            
            pipes.forEach((p, i) => {
                p.x -= 2; 
                // Top Pipe
                ctx.fillRect(p.x, 0, 30, p.top); 
                // Bottom Pipe
                ctx.fillRect(p.x, p.top + p.gap, 30, canvas.height - (p.top + p.gap)); 
                
                // Collision
                if(bird.x < p.x + 30 && bird.x + bird.size > p.x && (bird.y < p.top || bird.y + bird.size > p.top + p.gap)) { gameOver(); }
                if(p.x + 30 < bird.x && !p.passed) { score++; p.passed = true; document.getElementById('gScore').innerText = score; }
            });
            
            // Remove off-screen pipes
            if(pipes.length > 0 && pipes[0].x < -30) pipes.shift();

            if(bird.y > canvas.height || bird.y < 0) gameOver();
            requestAnimationFrame(loopGame);
        }

        function gameOver() {
            gameActive = false;
            if(score > highScore) { highScore = score; localStorage.setItem('rathore_game_high', highScore); document.getElementById('gBest').innerText = highScore; }
            idleLoop(); // Return to idle animation
        }
    </script>
</body>

</html>
